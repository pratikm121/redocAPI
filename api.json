{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Uturn API documentation",
    "termsOfService": "UTURN License",
    "contact": {
      "name": "UTURN",
      "url": "https://www.uturn-now.com",
      "email": "admin@uturn-now.com"
    },
    "license": {
      "name": "UTURN License",
      "url": "/portal/license"
    }
  },
  "host": "localhost:8383",
  "basePath": "/portal",
  "tags": [
    {
      "name": "Shippers",
      "description": "Shipper Endpoints"
    }
  ],
  "paths": {
    "/shippers/cancel/{shipmentNr}": {
      "put": {
        "tags": [
          "Shippers"
        ],
        "summary": "Cancel a shipment in Uturn platform.",
        "operationId": "cancelShipmentUsingPUT",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "*/*"
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "description": "api_key",
            "required": true,
            "type": "string"
          },
          {
            "name": "shipmentNr",
            "in": "path",
            "description": "shipmentNr",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/shippers/carrierContract/{shipmentNr}": {
      "get": {
        "tags": [
          "Shippers"
        ],
        "summary": "Get all carrier details for a shipment.",
        "operationId": "getCarrierContractUsingGET",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "*/*"
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "description": "api_key",
            "required": true,
            "type": "string"
          },
          {
            "name": "shipmentNr",
            "in": "path",
            "description": "shipmentNr",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/CarrierContract"
            }
          }
        }
      }
    },
    "/shippers/create/concept": {
      "post": {
        "tags": [
          "Shippers"
        ],
        "summary": "Create a shipment with concept status.",
        "operationId": "createConceptShipmentUsingPOST",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "*/*"
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "description": "api_key",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "request",
            "description": "request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/GenericAPICreateShipment"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        }
      }
    },
    "/shippers/create/publish": {
      "post": {
        "tags": [
          "Shippers"
        ],
        "summary": "Create a shipment and publish it.",
        "operationId": "createPublishShipmentUsingPOST",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "*/*"
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "description": "api_key",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "request",
            "description": "request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/GenericAPICreateShipment"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        }
      }
    },
    "/shippers/invoiceLines/{shipmentNr}": {
      "get": {
        "tags": [
          "Shippers"
        ],
        "summary": "Get invoice lines for a shipment.",
        "operationId": "getInvoiceLinesUsingGET",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "*/*"
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "description": "api_key",
            "required": true,
            "type": "string"
          },
          {
            "name": "shipmentNr",
            "in": "path",
            "description": "shipmentNr",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ShipmentInvoiceLinesDTO"
            }
          }
        }
      }
    },
    "/shippers/shipment/metaData": {
      "get": {
        "tags": [
          "Shippers"
        ],
        "summary": "Get all metadata for a shipment.",
        "operationId": "getShipmentMetaDataUsingGET",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "*/*"
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "description": "api_key",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/GenericAPIShipmentMetaData"
            }
          }
        }
      }
    },
    "/shippers/shipment/{shipmentNr}": {
      "get": {
        "tags": [
          "Shippers"
        ],
        "summary": "Get details of a shipment.",
        "operationId": "getShipmentDetailsUsingGET",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "*/*"
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "description": "api_key",
            "required": true,
            "type": "string"
          },
          {
            "name": "shipmentNr",
            "in": "path",
            "description": "shipmentNr",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/GenericAPIShipment"
            }
          }
        }
      }
    },
    "/shippers/withdraw/{shipmentNr}": {
      "put": {
        "tags": [
          "Shippers"
        ],
        "summary": "Withdraw a shipment from Uturn platform.Sets the status back to CONCEPT",
        "operationId": "withdrawShipmentUsingPUT",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "*/*"
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "description": "api_key",
            "required": true,
            "type": "string"
          },
          {
            "name": "shipmentNr",
            "in": "path",
            "description": "shipmentNr",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    }
  },
  "definitions": {
    "CancellationTypeDTO": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "id": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "CarrierContract": {
      "type": "object",
      "properties": {
        "action": {
          "type": "string",
          "example": "Accepted",
          "description": "Whether carrier accepted the shipment or was assigned by shipper."
        },
        "agreedPrice": {
          "type": "integer",
          "format": "int32",
          "example": 256,
          "description": "Agreed price of the shipment"
        },
        "capabilities": {
          "type": "array",
          "example": "{ADR,AEO,Gen-Set}",
          "description": "List of capabilities provided by the carrier",
          "items": {
            "type": "string"
          }
        },
        "email": {
          "type": "string",
          "example": "maxcar16@mailinator.com",
          "description": "Email of the carrier"
        },
        "firstName": {
          "type": "string",
          "example": "Maxime",
          "description": "First name of the carrier"
        },
        "oooPhone": {
          "type": "string",
          "example": "0666501431",
          "description": "Out of office phone of the carrier"
        },
        "organisationName": {
          "type": "string",
          "example": "UTURN CARRIER B.V.",
          "description": "Organisation name of the carrier"
        },
        "phone": {
          "type": "string",
          "example": "0666501432",
          "description": "Contact phone of the carrier"
        },
        "surName": {
          "type": "string",
          "example": "CARREY",
          "description": "Surname of the carrier"
        }
      }
    },
    "CountryDTO": {
      "type": "object",
      "properties": {
        "countryCode": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "id": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "EquipmentType": {
      "type": "object",
      "required": [
        "ISOCode"
      ],
      "properties": {
        "ISOCode": {
          "type": "string",
          "example": "LEG1",
          "description": "The ISO-code of the container"
        },
        "code": {
          "type": "string",
          "example": "1234",
          "description": "The SCAC code of the shipping line"
        },
        "description": {
          "type": "string",
          "example": "45FT HC Dry",
          "description": "The description of the container type"
        }
      }
    },
    "GenericAPICreateShipment": {
      "type": "object",
      "required": [
        "grossWeight",
        "shipmentUnit",
        "transportStops",
        "user"
      ],
      "properties": {
        "acceptancePrice": {
          "type": "boolean",
          "example": true,
          "description": "If TRUE carriers can accept the shipment for the price. If FALSE, it is bid only. If not filled, by default FALSE"
        },
        "carriers": {
          "type": "array",
          "example": "[10000872,10000873]",
          "description": "List of preferred carriers for this shipment. If empty, the shipment is published on the market.",
          "items": {
            "type": "integer",
            "format": "int32"
          }
        },
        "creationType": {
          "type": "string",
          "example": "publish",
          "description": "Status of the shipment after creation.",
          "enum": [
            "concept",
            "publish"
          ]
        },
        "equipmentId": {
          "type": "string",
          "example": "FOTU1234567",
          "description": "The container number of the transport order"
        },
        "generatorSet": {
          "type": "boolean",
          "example": false,
          "description": "If TRUE a generator set will be required. If not filled, by default FALSE"
        },
        "grossWeight": {
          "type": "integer",
          "example": 12000,
          "description": "Weight to be loaded + tare weight of container"
        },
        "hazardous": {
          "type": "boolean",
          "example": false,
          "description": "If TRUE the carrier requires ADR certificates. If not filled, by default FALSE"
        },
        "invoiceReference": {
          "type": "string",
          "example": "Invoice52846",
          "description": "Reference that will be used on the invoice. If not filled, by default UTURN shipment number"
        },
        "price": {
          "type": "integer",
          "format": "int32",
          "example": 450,
          "description": "Target price of the published transport, agreed price of the preferred carrier(s)"
        },
        "productCategory": {
          "description": "The general type of goods that are in the container, list can be provided",
          "$ref": "#/definitions/ProductCategory"
        },
        "publishFrom": {
          "type": "string",
          "format": "date-time",
          "example": "2019-11-11T13:34:58.80+02:00",
          "description": "If not filled, by default current date time"
        },
        "publishUntil": {
          "type": "string",
          "format": "date-time",
          "example": "2019-11-11T13:34:58.80+02:00",
          "description": "If not filled, by default stop1 Until Date time"
        },
        "remarks": {
          "type": "string",
          "example": "Driver should wear white socks",
          "description": "Additional remarks for this shipment"
        },
        "requirements": {
          "description": "The general type of goods that are in the container, list can be provided",
          "$ref": "#/definitions/Requirement"
        },
        "seal": {
          "type": "string",
          "example": "ABC123",
          "description": "Seal number of the equipment"
        },
        "shipmentUnit": {
          "description": "The type of equipment that needs to be transported",
          "$ref": "#/definitions/EquipmentType"
        },
        "shippingLine": {
          "description": "The shipping line for this shipment used to make pre-announcements",
          "$ref": "#/definitions/ShippingLine2"
        },
        "tareWeight": {
          "type": "integer",
          "format": "int32",
          "example": 3500,
          "description": "The weight of the container"
        },
        "transportStops": {
          "type": "array",
          "description": "Array of minimum 2 or more stops describing the stops required to execute the transport",
          "items": {
            "$ref": "#/definitions/TransportStop"
          }
        },
        "unCode": {
          "type": "string",
          "example": "1234",
          "description": "The four digit code identifying the type of hazardous goods. Required when hazardous"
        },
        "user": {
          "type": "string",
          "example": "planning@shipper.nl",
          "description": "E-mail address of the user making the request. Must be registered in the UTURN platform"
        },
        "vat": {
          "type": "boolean",
          "example": false,
          "description": "If TRUE, normal VAT rules will apply. If FALSE, 0% VAT will apply on this shipment. By default TRUE"
        }
      }
    },
    "GenericAPIShipment": {
      "type": "object",
      "required": [
        "grossWeight",
        "shipmentUnit",
        "transportStops",
        "user"
      ],
      "properties": {
        "acceptancePrice": {
          "type": "boolean",
          "example": true,
          "description": "If TRUE carriers can accept the shipment for the price. If FALSE, it is bid only. If not filled, by default FALSE"
        },
        "carriers": {
          "type": "array",
          "example": "[10000872,10000873]",
          "description": "List of preferred carriers for this shipment. If empty, the shipment is published on the market.",
          "items": {
            "type": "integer",
            "format": "int32"
          }
        },
        "equipmentId": {
          "type": "string",
          "example": "FOTU1234567",
          "description": "The container number of the transport order"
        },
        "generatorSet": {
          "type": "boolean",
          "example": false,
          "description": "If TRUE a generator set will be required. If not filled, by default FALSE"
        },
        "grossWeight": {
          "type": "integer",
          "example": 12000,
          "description": "Weight to be loaded + tare weight of container"
        },
        "hazardous": {
          "type": "boolean",
          "example": false,
          "description": "If TRUE the carrier requires ADR certificates. If not filled, by default FALSE"
        },
        "invoiceReference": {
          "type": "string",
          "example": "Invoice52846",
          "description": "Reference that will be used on the invoice. If not filled, by default UTURN shipment number"
        },
        "price": {
          "type": "integer",
          "format": "int32",
          "example": 450,
          "description": "Target price of the published transport, agreed price of the preferred carrier(s)"
        },
        "productCategory": {
          "description": "The general type of goods that are in the container, list can be provided",
          "$ref": "#/definitions/ProductCategory"
        },
        "publishFrom": {
          "type": "string",
          "format": "date-time",
          "example": "2019-11-11T13:34:58.80+02:00",
          "description": "If not filled, by default current date time"
        },
        "publishUntil": {
          "type": "string",
          "format": "date-time",
          "example": "2019-11-11T13:34:58.80+02:00",
          "description": "If not filled, by default stop1 Until Date time"
        },
        "remarks": {
          "type": "string",
          "example": "Driver should wear white socks",
          "description": "Additional remarks for this shipment"
        },
        "requirements": {
          "description": "The general type of goods that are in the container, list can be provided",
          "$ref": "#/definitions/Requirement"
        },
        "seal": {
          "type": "string",
          "example": "ABC123",
          "description": "Seal number of the equipment"
        },
        "shipmentNumber": {
          "type": "integer",
          "format": "int32",
          "description": "Shipment number. Not required during creation of shipment."
        },
        "shipmentStatus": {
          "type": "string",
          "description": "Current status of the shipment.Not required during creation of shipment."
        },
        "shipmentUnit": {
          "description": "The type of equipment that needs to be transported",
          "$ref": "#/definitions/EquipmentType"
        },
        "shippingLine": {
          "description": "The shipping line for this shipment used to make pre-announcements",
          "$ref": "#/definitions/ShippingLine2"
        },
        "tareWeight": {
          "type": "integer",
          "format": "int32",
          "example": 3500,
          "description": "The weight of the container"
        },
        "transportStops": {
          "type": "array",
          "description": "Array of minimum 2 or more stops describing the stops required to execute the transport",
          "items": {
            "$ref": "#/definitions/TransportStop"
          }
        },
        "tsoStatus": {
          "type": "string",
          "description": "Current status of Transport Order.Not required during creation of shipment."
        },
        "unCode": {
          "type": "string",
          "example": "1234",
          "description": "The four digit code identifying the type of hazardous goods. Required when hazardous"
        },
        "user": {
          "type": "string",
          "example": "planning@shipper.nl",
          "description": "E-mail address of the user booking this shipment"
        },
        "vat": {
          "type": "boolean",
          "example": false,
          "description": "If TRUE, normal VAT rules will apply. If FALSE, 0% VAT will apply on this shipment. By default TRUE"
        }
      }
    },
    "GenericAPIShipmentMetaData": {
      "type": "object",
      "required": [
        "shipmentUnits"
      ],
      "properties": {
        "shipmentUnits": {
          "type": "array",
          "description": "The type of equipment that needs to be transported",
          "items": {
            "$ref": "#/definitions/EquipmentType"
          }
        },
        "shippingLines": {
          "type": "array",
          "description": "The shipping line for this shipment used to make pre-announcements",
          "items": {
            "$ref": "#/definitions/ShippingLine2"
          }
        },
        "productCategories": {
          "type": "array",
          "description": "The general type of goods that are in the container, list can be provided",
          "items": {
            "$ref": "#/definitions/ProductCategory"
          }
        },
        "requirements": {
          "type": "array",
          "description": "The general type of goods that are in the container, list can be provided",
          "items": {
            "$ref": "#/definitions/Requirement"
          }
        },
        "cancellationTypes": {
          "type": "array",
          "description": "The list of valid shipment cancellation reasons",
          "items": {
            "$ref": "#/definitions/CancellationTypeDTO"
          }
        },
        "countries": {
          "type": "array",
          "description": "The list of countries",
          "items": {
            "$ref": "#/definitions/CountryDTO"
          }
        }
      }
    },
    "ProductCategory": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string",
          "example": "012",
          "description": "The code of the product category"
        },
        "name": {
          "type": "string",
          "example": "Electrical Supplies",
          "description": "The name of the product category"
        }
      }
    },
    "Requirement": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string",
          "example": "FC",
          "description": "The code of the requirement"
        },
        "name": {
          "type": "string",
          "example": "Frozen cargo (-25/-18C)",
          "description": "The name of the requirement"
        }
      }
    },
    "ShipmentInvoiceLineDTO": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "number",
          "example": 150,
          "description": "Amount of the invoice line"
        },
        "approvedDate": {
          "type": "string",
          "format": "date",
          "example": "2020-08-16",
          "description": "Date that the invoice line was approved in the platform."
        },
        "description": {
          "type": "string",
          "example": "70013199 - Transport",
          "description": "Description of the invoice invoice line. Normally the shipment ID in combination with the cost type"
        },
        "invoiceNumber": {
          "type": "integer",
          "format": "int32",
          "example": 10000872,
          "description": "Invoice number of the related invoice (if applicable)."
        },
        "lineStatus": {
          "type": "string",
          "example": "Wait for Approval",
          "description": "The status of the invoice line."
        },
        "reference": {
          "type": "string",
          "example": "Some reference",
          "description": "The invoice reference of the shipment."
        },
        "taxCode": {
          "type": "string",
          "description": "The tax code of the invoice line."
        },
        "totalAmount": {
          "type": "number",
          "example": 150,
          "description": "Total amount of the invoice line. Amount plus vatAmount."
        },
        "vatAmount": {
          "type": "number",
          "example": 150,
          "description": "Vat amount of the invoice line."
        }
      }
    },
    "ShipmentInvoiceLinesDTO": {
      "type": "object",
      "properties": {
        "lines": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ShipmentInvoiceLineDTO"
          }
        },
        "totalExclusiveVAT": {
          "type": "number",
          "example": 150,
          "description": "Total amount of the invoice lines of the shipment, excluding VAT"
        },
        "totalInclusiveVAT": {
          "type": "number",
          "example": 150,
          "description": "Total amount of the invoice lines of the shipment, including VAT"
        },
        "totalVAT": {
          "type": "number",
          "example": 150,
          "description": "Total VAT amount of the invoice lines of the shipment"
        }
      }
    },
    "ShippingLine2": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string",
          "example": "CMDU",
          "description": "The code of the shipping line (code list can be supplied)"
        },
        "name": {
          "type": "string",
          "example": "CMA-CGM",
          "description": "The name of the shipping line"
        }
      }
    },
    "TransportLocation": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "type": "string",
          "example": "Terminal Barendrecht",
          "description": "Name of the location, which will be used to map the location in UTURN"
        },
        "street": {
          "type": "string",
          "example": "Bazenstraat",
          "description": "Name of the street"
        },
        "houseNumber": {
          "type": "string",
          "example": "15",
          "description": "Address number"
        },
        "postalCode": {
          "type": "string",
          "example": "4444AB",
          "description": "Postal code"
        },
        "city": {
          "type": "string",
          "example": "Rotterdam",
          "description": "City"
        },
        "countryCode": {
          "type": "string",
          "example": "NL",
          "description": "Country code based on ISO 2 letter code"
        },
        "lat": {
          "type": "string",
          "example": "50.0821",
          "description": "Latitude of the location"
        },
        "lon": {
          "type": "string",
          "example": "4.4243",
          "description": "Longitude of the location"
        },
        "GLN": {
          "type": "string",
          "example": "9501101020016",
          "description": "GLN code of the location"
        }
      }
    },
    "TransportStop": {
      "type": "object",
      "required": [
        "location",
        "stopType"
      ],
      "properties": {
        "sequenceNumber": {
          "type": "integer",
          "format": "int32",
          "example": 1,
          "description": "The execution order of this stop in the transport"
        },
        "location": {
          "description": "The location of the stop",
          "$ref": "#/definitions/TransportLocation"
        },
        "stopType": {
          "type": "string",
          "example": "Pick-up",
          "description": "Stop type",
          "enum": [
            "Pick-up",
            "Load",
            "Deliver",
            "Drop",
            "Stop"
          ]
        },
        "from": {
          "type": "string",
          "format": "date-time",
          "example": "2019-11-11T13:34",
          "description": "Start of window for this location"
        },
        "until": {
          "type": "string",
          "format": "date-time",
          "example": "2019-11-12T13:34",
          "description": "End of window for this location"
        },
        "reference": {
          "type": "string",
          "example": "ABC12584",
          "description": "Reference needed to interact with the location"
        },
        "remarks": {
          "type": "string",
          "example": "Report at the blue gate",
          "description": "Additional instructions for the carrier for this location"
        },
        "shippingLine": {
          "description": "The shipping line for this stop to make pre-announcements, if it's different than the one specified in shipment",
          "$ref": "#/definitions/ShippingLine2"
        },
        "vesselName": {
          "type": "string",
          "example": "QUEEN ELIZABETH",
          "description": "Vessel name"
        },
        "port": {
          "type": "string",
          "example": "HOBART",
          "description": "Port name"
        },
        "actualArrival": {
          "type": "string",
          "format": "date-time",
          "example": "2019-11-11T13:34",
          "description": "Actual arrival of carrier for this location"
        },
        "actualDeparture": {
          "type": "string",
          "format": "date-time",
          "example": "2019-11-12T13:34",
          "description": "Actual departure of carrier for this location"
        },
        "eta": {
          "type": "string",
          "format": "date-time",
          "example": "2019-11-12T13:34",
          "description": "ETA for this location"
        }
      }
    }
  }
}
